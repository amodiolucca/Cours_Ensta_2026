# 3. Entraînement pour l'examen écrit

## 1. Prédiction de l'accélération maximale (Loi d'Amdahl)

**Question :** En utilisant la loi d'Amdahl, pouvez-vous prédire l'accélération maximale que pourra obtenir Alice avec son code (en considérant $n \gg 1$) ?

**Réponse :**
Selon la loi d'Amdahl, l'accélération maximale théorique ($S_{max}$) est limitée par la fraction séquentielle incompressible ($f$) du programme.
* Fraction parallèle ($p$) : $90\% = 0.9$
* Fraction séquentielle ($f = 1 - p$) : $10\% = 0.1$

Lorsque le nombre de nœuds $n$ tend vers l'infini, l'accélération tend vers :
$$S_{max} = \lim_{n \to \infty} \frac{1}{(1 - p) + \frac{p}{n}} = \frac{1}{1 - p} = \frac{1}{0.1} = 10$$

Alice peut donc espérer une accélération maximale théorique de 10.

---

## 2. Choix raisonnable du nombre de nœuds

**Question :** À votre avis, pour ce jeu de données spécifique, quel nombre de nœuds de calcul semble-t-il raisonnable de prendre pour ne pas trop gaspiller de ressources CPU ?

**Réponse :**
Le choix du nombre de nœuds doit viser un compromis entre l'accélération ($S$) et l'efficacité ($E = S/n$).
En appliquant la formule d'Amdahl $S(n) = \frac{1}{0.1 + \frac{0.9}{n}}$ :

* Pour $n = 9$ nœuds : $S(9) = \frac{1}{0.1 + 0.1} = 5$. L'efficacité est de $55\%$.
* Pour $n = 10$ nœuds : $S(10) \approx 5.26$. L'efficacité tombe à $\approx 52\%$.
* Pour $n = 19$ nœuds : $S(19) \approx 6.7$. L'efficacité chute drastiquement à $\approx 35\%$.

Il semble raisonnable de choisir 9 ou 10 nœuds. C'est le point de bascule où l'on atteint la moitié du speedup maximal théorique ($S=5$) tout en maintenant une efficacité supérieure à $50\%$. Au-delà, l'ajout de ressources apporte un gain marginal trop faible.

---

## 3. Application de la loi de Gustafson

**Question :** En doublant la quantité de données à traiter, et en supposant la complexité de l'algorithme parallèle linéaire, quelle accélération maximale peut espérer Alice en utilisant la loi de Gustafson ?

**Réponse :**
La loi de Gustafson suggère qu'augmenter la taille du problème permet de réduire l'impact relatif de la partie séquentielle.
Supposons un temps séquentiel normalisé de $1$ unité pour le problème initial ($T_{seq}=0.1$, $T_{par}=0.9$).

Si l'on double les données :
* La partie séquentielle reste constante : $T'_{seq} = 0.1$.
* La partie parallèle double (complexité linéaire) : $T'_{par} = 0.9 \times 2 = 1.8$.
* Nouveau temps total (sur 1 cœur) : $1.9$.

La nouvelle fraction parallèle ($p'$) devient :
$$p' = \frac{1.8}{1.9} \approx 0.947 \quad (soit \approx 94.7\%)$$

La nouvelle accélération maximale théorique (nouvelle limite d'Amdahl adaptée) devient :
$$S'_{max} = \frac{1}{1 - p'} = \frac{1}{1 - \frac{1.8}{1.9}} = \frac{1.9}{0.1} = 19$$

En doublant la quantité de données, Alice peut espérer une accélération maximale de 19.